/*! Swipeshow (c) 2013 Rico Sta. Cruz, MIT license. */// Opinionated, touch-enabled simple slideshow using Cycler.js.
//
//     <div class="slideshow">
//       <ul class="slides">
//         <li class="slide"> ... </il>
//         <li class="slide"> ... </li>
//         <li class="slide"> ... </li>
//       </ul>
//     
//       <!-- optional controls: -->
//       <button class="next"></button>
//       <button class="previous"></button>
//     </div>
//
// To use:
//
//     $(".slideshow").swipeshow();
//
// Options (all of these are optional):
//
//     $(".slideshow").swipeshow({
//       autostart: true,
//       interval: 3000,     /* Time between movement (ms) */
//       initial: 0,         /* First slide's index */
//       speed: 700,         /* Animation speed (ms) */
//       friction: 0.3,      /* What happens when you swipe out of bounds? */
//       mouse: true,        /* enable mouse dragging controls? */
//
//       onactivate: function(){},
//       onpause: function(){},
//
//       $next:     $("button.next"),
//       $previous: $("button.previous"),
//
//       // Not implemented yet:
//       $pegs:     $("ul.pegs")
//     });
//
//     $(".slideshow").swipeshow().next();
//     $(".slideshow").swipeshow().previous();
//     $(".slideshow").swipeshow().goTo(2);
//
//     $(".slideshow").swipeshow().pause();
//     $(".slideshow").swipeshow().start();
//
// Assumptions it makes:
//
//  - Markup is like above (`.slideshow > .slides > .slide`).
//  - Buttons (optional), by default, will be found in `.slideshow > .next` (and `.previous`)
//  - If there are images inside the slides, it will wait to load them before
//    starting the slideshow.
(function(a){function e(a,c,e){a.data("swipeshow:left",c),b?e===0?a.css({transform:"translate3d("+c+"px,0,0)",transition:"none"}):a.css({transform:"translate3d("+c+"px,0,0)",transition:"all "+e+"ms ease"}):e===0?a.css({left:c}):a.animate({left:c},e),a.addClass("gliding"),typeof d=="undefined"&&clearTimeout(d),d=setTimeout(function(){a.removeClass("gliding"),d=undefined},e)}function f(a){return a.data("swipeshow:left")||0}function g(b,d,g,i){var j=!1,k,l,m,n,o,p=b.width(),q=g.list.length,r=i.friction,s=".swipeshow.swipeshow-"+ ++c;b.data("swipeshow:tag",s),d.find("img").on("mousedown"+s,function(a){a.preventDefault()}),d.on("touchstart"+s+(i.mouse?" mousedown"+s:""),function(b){b.type==="mousedown"&&b.preventDefault();if(g.disabled)return;d.is(":animated")&&d.stop(),a(b.target).is("button, a, [data-tappable]")?o=100:o=0,d.addClass("grabbed"),a("html").addClass("swipeshow-grabbed"),j=!0,k={x:h(b)},l={x:f(d),started:g.isStarted()},m=0,n=null,l.started&&g.pause()}),a(document).on("touchmove"+s+(i.mouse?" mousemove"+s:""),function(a){if(g.disabled)return;if(d.is(":animated"))return;if(!j)return;var b=h(a);if(isNaN(b))return;m=b-k.x,Math.abs(m)<=o&&(m=0);var c=l.x+m,f=-1*p*(q-1);Math.abs(m)>3&&a.preventDefault(),c>0&&(c*=r),c<f&&(c=f+(c-f)*r),n=+(new Date),e(d,c,0)}),a(document).on("touchend"+s+(i.mouse?" mouseup"+s:""),function(b){if(g.disabled)return;if(d.is(":animated"))return;if(!j)return;var c=f(d);d.removeClass("grabbed"),a("html").removeClass("swipeshow-grabbed");var e=-1*Math.round(c/p);if(n&&g.current===e){var h=+(new Date)-n;if(Math.abs(m)>10&&h<20){var i=m<0?-1:1;e-=i}}e<0&&(e=0),e>g.list.length-1&&(e=g.list.length-1),g.goTo(e),b.preventDefault(),l.started&&g.start(),j=!1})}function h(a){if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches[0])return a.originalEvent.touches[0].clientX;if(a.clientX)return a.clientX}a.swipeshow={},a.swipeshow.version="0.9.1";var b=typeof a("<div>").css({transition:"all"}).css("transition")=="string",c=0;a.fn.swipeshow=function(b){return b||(b={}),b=a.extend({},{speed:400,friction:.3,mouse:!0},b),a(this).each(function(){var c=a(this),d=c.find("> .slides"),f=d.find("> .slide");if(c.data("swipeshow")){console.log("lready initilaized");return}var h=c.width(),i=new Cycler(f,a.extend({},b,{onactivate:function(c,f,g,i){b.onactivate&&b.onactivate(c,f,g,i),g&&a(g).removeClass("active"),c&&a(c).addClass("active"),e(d,-1*h*f,b.speed)}}));d.css({width:h*f.length}),c.addClass("ontouchstart"in document.documentElement?"touch":"no-touch");if(b.autostart!==!1){var j=c.find("img");j.length>0?(i.disabled=!0,c.addClass("disabled"),j.onloadall(function(){i.disabled=!1,c.removeClass("disabled"),i.start()})):i.start()}g(c,d,i,b);var k=b.$next||c.find(".next");k.on("click",function(a){a.preventDefault(),i.disabled||i.next()});var l=b.$previous||c.find(".previous");l.on("click",function(a){a.preventDefault(),i.disabled||i.previous()}),c.data("swipeshow",i)}),a(this).data("swipeshow")},a.fn.unswipeshow=function(){return this.each(function(){var b=a(this),c=b.find("> .slides"),d=b.data("swipeshow"),e=b.data("swipeshow:tag");d&&(d.pause(),c.find("img").off(e),c.off(e),a(document).off(e),b.data("swipeshow",null))}),this};var d})(jQuery),function(a){a.fn.onloadall=function(b){var c=this,d={loaded:0,total:c.length};return c.on("load.onloadall",function(){++d.loaded>=d.total&&b.apply(c)}),a(function(){c.each(function(){this.complete&&a(this).trigger("load.onloadall")})}),this}}(jQuery),function(){function a(a,b){return this.interval=b.interval||3e3,this.onactivate=b.onactivate||function(){},this.onpause=b.onpause||function(){},this.onstart=b.onstart||function(){},this.initial=typeof b.initial=="undefined"?0:b.initial,this.autostart=typeof b.initial=="undefined"?!0:b.autostart,this.list=a,this.current=null,this.goTo(this.initial),this.autostart&&typeof b.interval=="number"&&this.start(),this}a.prototype={start:function(a){var b=this;return!b.isStarted()&&!a&&b.onstart.apply(b),b.pause(!0),b._timer=setTimeout(function(){b.next()},b.interval),b},pause:function(a){return this.isStarted()&&(a||this.onpause.apply(this),clearTimeout(this._timer),this._timer=null),this},restart:function(a){return this._timer&&this.pause(!0).start(a),this},previous:function(){return this.next(-1)},isStarted:function(){return!!this._timer},isPaused:function(){return!this.isStarted()},next:function(a){typeof a=="undefined"&&(a=1);var b=this.list.length;if(b===0)return this;var c=(this.current+a+b*2)%b;return this.goTo(c)},goTo:function(a){if(typeof a!="number")return this;var b=this.current;return this.current=a,this.onactivate.call(this,this.list[a],a,this.list[b],b),this.restart(!0),this}},window.Cycler=a}()